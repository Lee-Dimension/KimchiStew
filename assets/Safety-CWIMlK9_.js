import{r as c,c as m,o as D,a as s,b as o,i as b,d as e,t as C,e as x,f,g as E,n as N,F as A,u as j}from"./index-CKOF-s42.js";const B={key:0,class:"fixed inset-0 bg-[rgba(0,0,0,0.75)] flex justify-center items-center z-50"},S={class:"bg-[#FFFEEF] p-8 rounded-lg shadow-xl text-center"},M={class:"text-xl font-bold mb-4"},T={class:"background-out"},V={class:"background-in"},z={class:"head-setting mb-16"},R={class:"space-y-5"},G={class:"small-box bg-[#1D1A05]"},P={key:0,class:"text-sm font-bold text-[#3A9CFF] mt-1"},$={key:1,class:"text-sm font-bold text-[#FF0000] mt-1"},q={class:"small-box bg-[#1D1A05] mt-5"},H={key:0,class:"text-sm font-bold text-[#3A9CFF] mt-1"},I={key:1,class:"text-sm font-bold text-[#FF0000] mt-1"},J={class:"mt-35"},K={class:"text-sm font-bold mt-1"},L={key:0,class:"text-gray-500"},O={key:1,class:"text-blue-500"},Q={key:2,class:"text-red-500"},U={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"#1D1A05",class:"w-6 h-6"},Z={__name:"Safety",setup(W){const k=j(),l=c("none"),a=c("none"),i=c(!1),d=c(""),w=m(()=>l.value&&l.value!=="none"?"valid":"none"),p=m(()=>{const n=l.value;if(!n||n==="none")return"none";const t=n.split("-").map(Number);if(t.length!==3||t.some(F=>Number.isNaN(F)))return"none";const[u,h,y]=t,g=new Date(u,h-1,y);if(Number.isNaN(g.getTime()))return"none";const v=new Date(g);return v.setMonth(v.getMonth()+3),new Date>=v?"expired":"valid"}),r=m(()=>a.value==="pass"?"pass":a.value==="nonepass"?"fail":"none");D(async()=>{try{const n=await fetch("http://localhost:8080/api/user/status",{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(n.ok){const t=await n.json();l.value=t?.educationCompletionDate??"none",a.value=t?.test??"none"}else l.value="none",a.value="none"}catch{l.value="none",a.value="none"}p.value==="expired"?(d.value="재교육 대상자입니다.",i.value=!0):p.value==="none"&&(d.value="기초교육 대상자입니다.",i.value=!0)});const _=()=>{if(w.value==="none"){d.value="기초교육을 완수해야합니다.",i.value=!0;return}r.value!=="pass"&&k.push("/test")};return(n,t)=>{const u=E("router-link");return o(),s(A,null,[i.value?(o(),s("div",B,[e("div",S,[e("p",M,C(d.value),1),e("button",{onClick:t[0]||(t[0]=h=>i.value=!1),class:"bg-[#1D1A05] hover:bg-black text-[#FFEA00] font-bold py-2 px-8 rounded"},"확인")])])):b("",!0),e("div",T,[e("div",V,[e("header",z,[x(u,{to:"/main",class:"heed-text"},{default:f(()=>[...t[1]||(t[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"#78711D",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})],-1)])]),_:1}),t[2]||(t[2]=e("h1",{class:"text-3xl font-bold text-[#78711D]"},"안전 교육",-1)),t[3]||(t[3]=e("p",null,null,-1))]),e("main",R,[x(u,{to:"/education"},{default:f(()=>[e("div",G,[e("div",null,[t[4]||(t[4]=e("p",{class:"text-lg font-bold text-[#FFEC17]"},"건설업 기초안전보건교육",-1)),w.value==="valid"?(o(),s("p",P,"이수")):(o(),s("p",$,"미이수"))]),t[5]||(t[5]=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"white",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})],-1))])]),_:1}),x(u,{to:"/education"},{default:f(()=>[e("div",q,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-lg font-bold text-[#FFEC17]"},"정기 안전보건교육",-1)),p.value==="valid"?(o(),s("p",H,"이수")):(o(),s("p",I,"미이수"))]),t[7]||(t[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"white",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})],-1))])]),_:1})]),e("footer",J,[e("div",{onClick:_,class:N(["small-box",r.value==="pass"?"cursor-not-allowed":"cursor-pointer","bg-[#FFEC17]"])},[e("div",null,[t[8]||(t[8]=e("p",{class:"text-lg font-bold text-[#1D1A05]"},"안전 시험",-1)),e("p",K,[r.value==="none"?(o(),s("span",L,"미응시")):r.value==="pass"?(o(),s("span",O,"합격")):r.value==="fail"?(o(),s("span",Q,"불합격")):b("",!0)])]),(o(),s("svg",U,[...t[9]||(t[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"},null,-1)])]))],2)])])])],64)}}};export{Z as default};
