import{_ as B,c as x,f as b,a as c,o as u,m as v,b as e,d as U,w as E,r as J,n as D,t as h,F as O,k as V}from"./index-B0wxRxvP.js";const A=["src"],z={class:"background-out flex items-center justify-center"},L={class:"background-in md:max-w-2xl lg:max-w-3xl"},H={class:"head-setting mb-10 md:mb-12"},Y={class:"h-100 w-full bg-[#1D1A05] rounded-3xl p-5 md:p-8 lg:p-10 md:min-h-[720px] text-white overflow-y-auto flex flex-col"},R=["innerHTML"],q=["src"],G={key:0,class:"my-4 text-center flex-shrink-0 mt-30"},K=["disabled"],Q={class:"page-box"},W=["disabled"],X={class:"text-lg md:text-2xl font-bold text-[#78711D]"},Z=["disabled"],tt={__name:"EducationView",setup(et){const f=[{type:"image",content:"/education/education1.jpg"},{type:"image",content:"/education/education2.jpg"},{type:"image",content:"/education/education3.jpg"},{type:"image",content:"/education/education4.jpg"},{type:"image",content:"/education/education5.jpg"},{type:"image",content:"/education/education6.jpg"},{type:"image",content:"/education/education7.jpg"},{type:"image",content:"/education/education8.jpg"},{type:"image",content:"/education/education9.jpg"},{type:"text",content:`<p class='text-lg text-center text-blue-500 md:text-3xl'>교육자료 출처<br>산업안전보건공단</p><br>
      <p class='text-lg text-center text-red-500 md:text-3xl'>[ 안전 10계명 ]</p><br>
      <p><span class='text-blue-500'>1. 안전모, 안전화 등 보호구 착용:</span>  <br>현장에서는 반드시 지정된 개인 보호구를 착용해야 합니다.</p><br>
      <p><span class='text-blue-500'>2. 작업 전 안전 점검:</span>  <br>작업을 시작하기 전에 장비와 주변 환경을 점검하여 위험 요인을 확인합니다.</p><br>
      <p><span class='text-blue-500'>3. 위험 지역 접근 금지:</span>  <br>출입이 통제된 구역이나 위험 표지가 있는 곳은 절대 들어가지 않습니다.</p><br>
      <p><span class='text-blue-500'>4. 안전 통로 이용:</span>  <br>작업장 내 정해진 안전 통로로만 이동합니다.</p><br>
      <p><span class='text-blue-500'>5. 고소 작업 시 안전벨트 착용:</span>  <br>높은 곳에서 작업할 때는 추락 방지를 위해 안전벨트를 착용하고 안전대를 걸어야 합니다.</p><br>
      <p><span class='text-blue-500'>6. 전기 장비 주의:</span>  <br>전기 관련 작업이나 장비 사용 시에는 누전이나 감전 위험에 항상 주의합니다.</p><br>
      <p><span class='text-blue-500'>7. 정해진 작업 순서 준수:</span>  <br>임의로 작업 순서를 바꾸지 않고 정해진 절차대로 작업합니다.</p><br>
      <p><span class='text-blue-500'>8. 안전 교육 이수:</span>  <br>주기적으로 실시하는 안전 교육에 빠짐없이 참여하여 안전 지식을 습득합니다.</p><br>
      <p><span class='text-blue-500'>9. 음주 작업 금지:</span>  <br>음주 상태에서는 절대 작업하지 않습니다.</p><br>
      <p><span class='text-blue-500'>10. 안전 수칙 준수:</span>  <br>어떤 상황에서도 안전 수칙을 최우선으로 생각하고 준수합니다.</p>`},{type:"text",content:"<p class=' text-center'>모든 교육 내용을 숙지하셨습니다.</p> <br><br><br><br> <p class='text-lg text-center text-blue-500'>아래 버튼을 눌러 <br>교육을 완료하세요.</p>"}],w=V(),o=x(()=>{const n=sessionStorage.getItem("loggedInUser");return n?JSON.parse(n):null});function j(n){if(!n||n==="none")return null;const t=String(n).split("-");if(t.length!==3)return null;let[s,a,l]=t;s.length===2&&(s=`20${s}`);const g=Number(s),m=Number(a),S=Number(l);if([g,m,S].some(P=>Number.isNaN(P)))return null;const C=new Date(g,m-1,S);return Number.isNaN(C.getTime())?null:C}const N=x(()=>{const n=o.value?.educationCompletionDate,t=j(n);if(!t)return"none";const s=new Date(t);return s.setMonth(s.getMonth()+3),new Date>=s?"expired":"valid"}),d=b(!1),$=async()=>{if(!(!o.value||d.value)){d.value=!0;try{const n=new Date,t=String(n.getFullYear()),s=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0"),l=`${t}-${s}-${a}`;if(!!(o.value?.isTester||o.value?.name==="테스터"))o.value.educationCompletionDate=l,sessionStorage.setItem("loggedInUser",JSON.stringify(o.value));else{if(!(await fetch("http://localhost:8080/api/user/education",{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({completion_date:l})})).ok){alert("교육 이수 처리에 실패했습니다. 잠시 후 다시 시도해주세요.");return}o.value.educationCompletionDate=l,sessionStorage.setItem("loggedInUser",JSON.stringify(o.value))}w.push("/education")}catch{if(!!(o.value?.isTester||o.value?.name==="테스터")){const s=new Date,a=String(s.getFullYear()),l=String(s.getMonth()+1).padStart(2,"0"),g=String(s.getDate()).padStart(2,"0"),m=`${a}-${l}-${g}`;o.value.educationCompletionDate=m,sessionStorage.setItem("loggedInUser",JSON.stringify(o.value)),w.push("/education");return}alert("네트워크 오류가 발생했습니다. 잠시 후 다시 시도해주세요.")}finally{d.value=!1}}},r=b(0),y=b(!1),k=b(""),i=x(()=>f[r.value]),_=x(()=>r.value===0),p=x(()=>r.value===f.length-1),F=()=>{p.value||r.value++},T=()=>{_.value||r.value--},I=n=>{k.value=n,y.value=!0},M=()=>{y.value=!1};return(n,t)=>{const s=J("router-link");return u(),c(O,null,[y.value?(u(),c("div",{key:0,onClick:M,class:"fixed inset-0 bg-[rgba(0,0,0,0.85)] flex justify-center items-center z-50 p-4"},[e("img",{src:k.value,class:"max-w-full max-h-full object-contain"},null,8,A),t[1]||(t[1]=e("button",{class:"absolute top-4 right-4 text-white text-4xl font-bold"}," × ",-1))])):v("",!0),e("div",z,[e("div",L,[e("header",H,[U(s,{to:"/education",class:"heed-text"},{default:E(()=>[...t[2]||(t[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"#78711D",class:"w-6 h-6 md:w-8 md:h-8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})],-1)])]),_:1}),t[3]||(t[3]=e("h1",{class:"text-3xl md:text-4xl font-bold text-[#78711D]"}," 정기 안전보건교육 ",-1)),t[4]||(t[4]=e("p",null,null,-1))]),e("div",Y,[e("div",{class:D(["flex-1 w-full",i.value.type==="image"||p.value?"flex items-center justify-center":""])},[i.value.type==="text"?(u(),c("div",{key:0,innerHTML:i.value.content,class:D([p.value?"text-center":"text-left","md:text-xl md:leading-relaxed"])},null,10,R)):i.value.type==="image"?(u(),c("img",{key:1,src:i.value.content,alt:"Education Content",class:"max-w-full h-auto md:max-h-[70vh] object-contain cursor-pointer md:rounded-xl mx-auto",onClick:t[0]||(t[0]=a=>I(i.value.content))},null,8,q)):v("",!0)],2),p.value?(u(),c("div",G,[N.value!=="valid"?(u(),c("button",{key:0,onClick:$,disabled:d.value,class:"w-full bg-black hover:bg-zinc-900 disabled:opacity-60 disabled:cursor-not-allowed border border-[#3A9CFF] text-[#3A9CFF] font-bold py-3 md:py-4 px-4 md:text-lg rounded-lg"},h(d.value?"처리 중...":"교육 이수 완료"),9,K)):v("",!0)])):v("",!0)]),e("footer",Q,[e("button",{onClick:T,disabled:_.value,class:"page-button"},[...t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})],-1)])],8,W),e("p",X,h(r.value+1)+" / "+h(f.length),1),e("button",{onClick:F,disabled:p.value,class:"page-button"},[...t[6]||(t[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor",class:"w-6 h-6 md:w-8 md:h-8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})],-1)])],8,Z)])])])],64)}}},st=B(tt,[["__scopeId","data-v-17dd012d"]]);export{st as default};
