import{f as p,c as w,l as D,a as s,o,m as k,b as e,t as C,d as f,w as h,r as E,n as N,F as A,k as j}from"./index-B0wxRxvP.js";const B={key:0,class:"fixed inset-0 bg-[rgba(0,0,0,0.75)] flex justify-center items-center z-50"},S={class:"bg-[#FFFEEF] p-8 rounded-lg shadow-xl text-center"},T={class:"text-xl font-bold mb-4"},M={class:"background-out flex justify-center items-center"},R={class:"background-in"},U={class:"head-setting mb-15"},V={class:"space-y-5"},z={class:"small-box bg-[#1D1A05] md:px-12 md:py-10"},I={key:0,class:"text-sm md:text-base font-bold text-[#3A9CFF] mt-1"},G={key:1,class:"text-sm md:text-base font-bold text-[#FF0000] mt-1"},J={class:"small-box bg-[#1D1A05] mt-5 md:px-12 md:py-10"},O={key:0,class:"text-sm md:text-base font-bold text-[#3A9CFF] mt-1"},P={key:1,class:"text-sm md:text-base font-bold text-[#FF0000] mt-1"},$={class:"mt-45 md:mt-56"},q={class:"text-sm md:text-base font-bold mt-1"},H={key:0,class:"text-gray-500"},K={key:1,class:"text-blue-500"},L={key:2,class:"text-red-500"},Q={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"#1D1A05",class:"w-6 h-6 md:w-8 md:h-8"},Z={__name:"Education",setup(W){const _=j(),l=p("none"),d=p("none"),u=p(!1),m=p(""),b=w(()=>l.value&&l.value!=="none"?"valid":"none"),v=w(()=>{const a=l.value;if(!a||a==="none")return"none";const t=a.split("-").map(Number);if(t.length!==3||t.some(F=>Number.isNaN(F)))return"none";const[i,n,r]=t,g=new Date(i,n-1,r);if(Number.isNaN(g.getTime()))return"none";const x=new Date(g);return x.setMonth(x.getMonth()+3),new Date>=x?"expired":"valid"}),c=w(()=>d.value==="pass"?"pass":d.value==="nonepass"?"fail":"none");D(async()=>{const a=sessionStorage.getItem("loggedInUser"),t=a?JSON.parse(a):null,i=!!(t?.isTester||t?.name==="테스터");try{const n=await fetch("http://localhost:8080/api/user/status",{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(n.ok){const r=await n.json();l.value=r?.educationCompletionDate??"none",d.value=r?.test??"none"}else l.value="none",d.value="none"}catch{l.value="none",d.value="none"}if(i&&t){const n=t.educationCompletionDate;l.value=n||"none";const r=t.test;d.value=r??"none"}v.value==="expired"?(m.value="재교육 대상자입니다.",u.value=!0):v.value==="none"&&(m.value="기초교육 대상자입니다.",u.value=!0)});const y=()=>{if(b.value==="none"){m.value="기초교육을 완수해야합니다.",u.value=!0;return}c.value!=="pass"&&_.push("/education/test")};return(a,t)=>{const i=E("router-link");return o(),s(A,null,[u.value?(o(),s("div",B,[e("div",S,[e("p",T,C(m.value),1),e("button",{onClick:t[0]||(t[0]=n=>u.value=!1),class:"bg-[#1D1A05] hover:bg-black text-[#FFEA00] font-bold py-2 px-8 rounded"}," 확인 ")])])):k("",!0),e("div",M,[e("div",R,[e("header",U,[f(i,{to:"/main",class:"heed-text"},{default:h(()=>[...t[1]||(t[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2.5",stroke:"#78711D",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})],-1)])]),_:1}),t[2]||(t[2]=e("h1",{class:"text-3xl font-bold text-[#78711D]"},"안전 교육",-1)),t[3]||(t[3]=e("p",null,null,-1))]),e("main",V,[f(i,{to:"/educationview"},{default:h(()=>[e("div",z,[e("div",null,[t[4]||(t[4]=e("p",{class:"text-lg md:text-2xl font-bold text-[#FFEC17]"}," 건설업 기초안전보건교육 ",-1)),b.value==="valid"?(o(),s("p",I," 이수 ")):(o(),s("p",G," 미이수 "))]),t[5]||(t[5]=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"white",class:"w-6 h-6 md:w-8 md:h-8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})],-1))])]),_:1}),f(i,{to:"/educationview"},{default:h(()=>[e("div",J,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-lg md:text-2xl font-bold text-[#FFEC17]"}," 정기 안전보건교육 ",-1)),v.value==="valid"?(o(),s("p",O," 이수 ")):(o(),s("p",P," 미이수 "))]),t[7]||(t[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"white",class:"w-6 h-6 md:w-8 md:h-8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})],-1))])]),_:1})]),e("footer",$,[e("div",{onClick:y,class:N(["small-box",c.value==="pass"?"cursor-not-allowed":"cursor-pointer","bg-[#FFEC17]","md:px-12 md:py-10"])},[e("div",null,[t[8]||(t[8]=e("p",{class:"text-lg md:text-2xl font-bold text-[#1D1A05]"}," 안전 시험 ",-1)),e("p",q,[c.value==="none"?(o(),s("span",H,"미응시")):c.value==="pass"?(o(),s("span",K,"합격")):c.value==="fail"?(o(),s("span",L,"불합격")):k("",!0)])]),(o(),s("svg",Q,[...t[9]||(t[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"},null,-1)])]))],2)])])])],64)}}};export{Z as default};
